{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Add Title Here","text":""},{"location":"#this-page-should-be-a-generic-landing-page-explaining-how-to-use-the-site-etc","title":"This page should be a generic landing page explaining how to use the site, etc","text":""},{"location":"configuration/configuration_options/","title":"Configuration Options Documentation","text":""},{"location":"configuration/configuration_options/#afc","title":"AFC","text":"<ul> <li><code>moonraker_port</code> (default: <code>None</code>): Port to connect to when interacting with moonraker. Used when there are multiple moonraker/klipper instances on a single host</li> <li><code>VarFile</code> (default: <code>'../printer_data/config/AFC/'</code>): Path to the variables file for AFC configuration.</li> <li><code>default_material_temps</code> (default: <code>None</code>): Default temperature to set extruder when loading/unloading lanes. Material needs to be either manually set or uses material from spoolman if extruder temp is not set in spoolman.</li> <li><code>default_material_type</code> (default: <code>None</code>): Default material type to assign to a spool once loaded into a lane</li> <li><code>led_fault</code> (default: <code>'1,0,0,0'</code>): LED color to set when faults occur in lane        (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_ready</code> (default: <code>'1,1,1,1'</code>): LED color to set when lane is ready               (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_not_ready</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane not ready              (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_loading</code> (default: <code>'1,0,0,0'</code>): LED color to set when lane is loading             (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_loading</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is loaded              (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_unloading</code> (default: <code>'1,1,.5,0'</code>): LED color to set when lane is unloading           (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_tool_loaded</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is loaded into tool    (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_buffer_advancing</code> (default: <code>'0,0,1,0'</code>): LED color to set when buffer is advancing         (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_buffer_trailing</code> (default: <code>'0,1,0,0'</code>): LED color to set when buffer is trailing          (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>led_buffer_disable</code> (default: <code>'0,0,0,0.25'</code>): LED color to set when buffer is disabled          (R,G,B,W) 0 = off, 1 = full brightness.</li> <li><code>tool_cut</code> (default: <code>False</code>): Set to True to enable toolhead cutting</li> <li><code>tool_cut_cmd</code> (default: <code>None</code>): Macro to use when doing toolhead cutting. Change macro name if you would like to use your own cutting macro</li> <li><code>park</code> (default: <code>False</code>): Set to True to enable parking during unload</li> <li><code>park_cmd</code> (default: <code>None</code>): Macro to use when parking. Change macro name if you would like to use your own park macro</li> <li><code>kick</code> (default: <code>False</code>): Set to True to enable poop kicking after lane loads</li> <li><code>kick_cmd</code> (default: <code>None</code>): Macro to use when kicking. Change macro name if you would like to use your own kick macro</li> <li><code>wipe</code> (default: <code>False</code>): Set to True to enable nozzle wiping after lane loads</li> <li><code>wipe_cmd</code> (default: <code>None</code>): Macro to use when nozzle wiping. Change macro name if you would like to use your own wipe macro</li> <li><code>poop</code> (default: <code>False</code>): Set to True to enable pooping(purging color) after lane loads</li> <li><code>poop_cmd</code> (default: <code>None</code>): Macro to use when pooping. Change macro name if you would like to use your own poop/purge macro</li> <li><code>form_tip</code> (default: <code>False</code>): Set to True to tip forming when unloading lanes</li> <li><code>form_tip_cmd</code> (default: <code>None</code>): Macro to use when tip forming. Change macro name if you would like to use your own tip forming macro</li> <li><code>long_moves_speed</code> (default: <code>100</code>): Speed in mm/s to move filament when doing long moves</li> <li><code>long_moves_accel</code> (default: <code>400</code>): Acceleration in mm/s squared when doing long moves</li> <li><code>short_moves_speed</code> (default: <code>25</code>): Speed in mm/s to move filament when doing short moves</li> <li><code>short_moves_accel</code> (default: <code>400</code>): Acceleration in mm/s squared when doing short moves</li> <li><code>short_move_dis</code> (default: <code>10</code>): Move distance in mm for failsafe moves.</li> <li><code>max_move_dis</code> (default: <code>999999</code>): Maximum distance to move filament. AFC breaks filament moves over this number into multiple moves. Useful to lower this number if running into timer too close errors when doing long filament moves.</li> <li><code>n20_break_delay_time</code> (default: <code>0.200</code>): Time to wait between breaking n20 motors(nSleep/FWD/RWD all 1) and then releasing the break to allow coasting.</li> <li><code>tool_max_unload_attempts</code> (default: <code>2</code>): Max number of attempts to unload filament from toolhead when using buffer as ramming sensor</li> <li><code>tool_max_load_checks</code> (default: <code>4</code>): Max number of attempts to check to make sure filament is loaded into toolhead extruder when using buffer as ramming sensor</li> <li><code>z_hop</code> (default: <code>0</code>): Height to move up before and after a tool change completes</li> <li><code>xy_resume</code> (default: <code>False</code>): Need description or remove as this is currently an unused variable</li> <li><code>resume_speed</code> (default: <code>25</code>): Speed mm/s of resume move. Set to 0 to use gcode speed</li> <li><code>resume_z_speed</code> (default: <code>25</code>): Speed mm/s of resume move in Z. Set to 0 to use gcode speed</li> <li><code>global_print_current</code> (default: <code>None</code>): Global variable to set steppers current to a specified current when printing. Going lower than 0.6 may result in TurtleNeck buffer's not working correctly</li> <li><code>enable_sensors_in_gui</code> (default: <code>False</code>): Set to True to show all sensor switches as filament sensors in mainsail/fluidd gui</li> <li><code>load_to_hub</code> (default: <code>True</code>): Fast loads filament to hub when inserted, set to False to disable. This is a global setting and can be overridden at AFC_stepper</li> <li><code>assisted_unload</code> (default: <code>True</code>): If True, the unload retract is assisted to prevent loose windings, especially on full spools. This can prevent loops from slipping off the spool</li> <li><code>pause_when_bypass_active</code> (default: <code>False</code>): When true AFC pauses print when change tool is called and bypass is loaded</li> <li><code>unload_on_runout</code> (default: <code>False</code>): When True AFC will unload lane and then pause when runout is triggered and spool to swap to is not set(infinite spool)</li> <li><code>debug</code> (default: <code>False</code>): Setting to True turns on more debugging to show on console</li> <li><code>trsync_update</code> (default: <code>False</code>): Set to true to enable updating trsync value in klipper mcu. Enabling this and updating the timeouts can help with Timer Too Close(TTC) errors</li> <li><code>trsync_timeout</code> (default: <code>0.05</code>): Timeout value to update in klipper mcu. Klippers default value is 0.025</li> <li><code>trsync_single_timeout</code> (default: <code>0.5</code>): Single timeout value to update in klipper mcu. Klippers default value is 0.250</li> </ul>"},{"location":"configuration/configuration_options/#afc_buffer","title":"AFC_buffer","text":"<ul> <li><code>enable_sensors_in_gui</code> (default: <code>False</code>): Set to True toolhead sensors switches as filament sensors in mainsail/fluidd gui, overrides value set in AFC.cfg</li> <li><code>velocity</code> (default: <code>0</code>): Velocity for forward assist</li> <li><code>accel</code> (default: <code>0</code>): Error if buffer is not configured correctly</li> </ul>"},{"location":"configuration/configuration_options/#afc_extruder","title":"AFC_extruder","text":"<ul> <li><code>pin_tool_start</code> (default: <code>None</code>): Pin for sensor before(pre) extruder gears</li> <li><code>pin_tool_end</code> (default: <code>None</code>): Pin for sensor after(post) extruder gears (optional)</li> <li><code>tool_stn</code> (default: <code>72</code>): Distance in mm from the toolhead sensor to the tip of the nozzle in mm, if <code>tool_end</code> is defined then distance is from this sensor</li> <li><code>tool_stn_unload</code> (default: <code>100</code>): Distance to move in mm while unloading toolhead</li> <li><code>tool_sensor_after_extruder</code> (default: <code>0</code>): Extra distance to move in mm once pre/post sensors are clear. Useful for when only using post sensor, so this distance can be the amout to move to clear extruder gears</li> <li><code>tool_unload_speed</code> (default: <code>25</code>): Unload speed in mm/s when unloading toolhead. Default is 25mm/s.</li> <li><code>tool_load_speed</code> (default: <code>25</code>): Load speed in mm/s when unloading toolhead. Default is 25mm/s.</li> <li><code>buffer</code> (default: <code>None</code>): Buffer to use for extruder, this variable can be overridden per lane</li> <li><code>enable_sensors_in_gui</code> (default: <code>False</code>): Set to True toolhead sensors switches as filament sensors in mainsail/fluidd gui, overrides value set in AFC.cfg</li> </ul>"},{"location":"configuration/configuration_options/#afc_hub","title":"AFC_hub","text":"<ul> <li><code>switch_pin</code> (default: <code>None</code>): Pin hub sensor it connected to</li> <li><code>hub_clear_move_dis</code> (default: <code>25</code>): How far to move filament so that it's not block the hub exit</li> <li><code>afc_bowden_length</code> (default: <code>900</code>): Length of the Bowden tube from the hub to the toolhead sensor in mm.</li> <li><code>afc_unload_bowden_length</code> (default: <code>afc_bowden_length</code>): Length to unload when retracting back from toolhead to hub in mm. Defaults to afc_bowden_length</li> <li><code>assisted_retract</code> (default: <code>False</code>): if True, retracts are assisted to prevent loose windings on the spool</li> <li><code>move_dis</code> (default: <code>50</code>): Distance to move the filament within the hub in mm.</li> <li><code>cut</code> (default: <code>False</code>): Set True if Hub cutter installed (e.g. Snappy)</li> <li><code>cut_cmd</code> (default: <code>None</code>): Macro to use for cut.</li> <li><code>cut_servo_name</code> (default: <code>'cut'</code>): Name of servo to use for cutting</li> <li><code>cut_dist</code> (default: <code>50</code>): How much filament to cut off (in mm).</li> <li><code>cut_clear</code> (default: <code>120</code>): How far the filament should retract back from the hub (in mm).</li> <li><code>cut_min_length</code> (default: <code>200</code>): Minimum length of filament to cut off</li> <li><code>cut_servo_pass_angle</code> (default: <code>0</code>): Servo angle to align the Bowden tube with the hole for loading the toolhead.</li> <li><code>cut_servo_clip_angle</code> (default: <code>160</code>): Servo angle for cutting the filament.</li> <li><code>cut_servo_prep_angle</code> (default: <code>75</code>): Servo angle to prepare the filament for cutting (aligning the exit hole).</li> <li><code>cut_confirm</code> (default: <code>0</code>): Set True to cut filament twice</li> <li><code>enable_sensors_in_gui</code> (default: <code>False</code>): Set to True to show hub sensor switche as filament sensor in mainsail/fluidd gui, overrides value set in AFC.cfg</li> </ul>"},{"location":"configuration/configuration_options/#afc_prep","title":"AFC_prep","text":"<ul> <li><code>delay_time</code> (default: <code>0.1, minval=0.0</code>): Time to delay when moving extruders and spoolers during PREP routine</li> <li><code>enable</code> (default: <code>False</code>): Set True to disable PREP checks</li> <li><code>disable_unload_filament_remapping</code> (default: <code>False</code>): Set to True to disable remapping UNLOAD_FILAMENT macro to TOOL_UNLOAD macro</li> </ul>"},{"location":"configuration/configuration_options/#afc_stepper","title":"AFC_stepper","text":"<ul> <li><code>hub</code> (default: <code>None</code>): Hub name(AFC_hub) that belongs to this stepper, overrides hub that is set in unit(AFC_BoxTurtle/NightOwl/etc) section.</li> <li><code>buffer</code> (default: <code>None</code>): Buffer name(AFC_buffer) that belongs to this stepper, overrides buffer that is set in extruder(AFC_extruder) or unit(AFC_BoxTurtle/NightOwl/etc) sections.</li> <li><code>extruder</code> (default: <code>None</code>): Extruder name(AFC_extruder) that belongs to this stepper, overrides extruder that is set in unit(AFC_BoxTurtle/NightOwl/etc) section.</li> <li><code>led_index</code> (default: <code>None</code>): LED index of lane in chain of lane LEDs</li> <li><code>led_fault</code> (default: <code>None</code>): LED color to set when faults occur in lane        (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>led_ready</code> (default: <code>None</code>): LED color to set when lane is ready               (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>led_not_ready</code> (default: <code>None</code>): LED color to set when lane not ready              (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>led_loading</code> (default: <code>None</code>): LED color to set when lane is loading             (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>led_loading</code> (default: <code>None</code>): LED color to set when lane is loaded              (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>led_unloading</code> (default: <code>None</code>): LED color to set when lane is unloading           (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>led_tool_loaded</code> (default: <code>None</code>): LED color to set when lane is loaded into tool    (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>long_moves_speed</code> (default: <code>None</code>): Speed in mm/s to move filament when doing long moves. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>long_moves_accel</code> (default: <code>None</code>): Acceleration in mm/s squared when doing long moves. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>short_moves_speed</code> (default: <code>None</code>): Speed in mm/s to move filament when doing short moves. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>short_moves_accel</code> (default: <code>None</code>): Acceleration in mm/s squared when doing short moves. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>short_move_dis</code> (default: <code>None</code>): Move distance in mm for failsafe moves. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>max_move_dis</code> (default: <code>999999</code>): Maximum distance to move filament. AFC breaks filament moves over this number into multiple moves. Useful to lower this number if running into timer too close errors when doing long filament moves. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>n20_break_delay_time</code> (default: <code>0.200</code>): Time to wait between breaking n20 motors(nSleep/FWD/RWD all 1) and then releasing the break to allow coasting. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>dist_hub</code> (default: <code>60</code>): Bowden distance between Box Turtle extruder and hub</li> <li><code>park_dist</code> (default: <code>10</code>): Currently unused</li> <li><code>load_to_hub</code> (default: <code>True</code>): Fast loads filament to hub when inserted, set to False to disable. Setting here overrides global setting in AFC.cfg</li> <li><code>enable_sensors_in_gui</code> (default: <code>False</code>): Set to True to show prep and load sensors switches as filament sensors in mainsail/fluidd gui, overrides value set in AFC.cfg</li> <li><code>sensor_to_show</code> (default: <code>None</code>): Set to prep to only show prep sensor, set to load to only show load sensor. Do not add if you want both prep and load sensors to show in web gui</li> <li><code>assisted_unload</code> (default: <code>False</code>): If True, the unload retract is assisted to prevent loose windings, especially on full spools. This can prevent loops from slipping off the spool. Setting value here overrides values set in unit(AFC_BoxTurtle/NightOwl/etc) section</li> <li><code>prep</code> (default: <code>None</code>): MCU pin for prep trigger</li> <li><code>load</code> (default: <code>None</code>): MCU pin load trigger</li> <li><code>afc_motor_rwd</code> (default: <code>None</code>): Reverse pin on MCU for spoolers</li> <li><code>afc_motor_fwd</code> (default: <code>None</code>): Forwards pin on MCU for spoolers</li> <li><code>afc_motor_enb</code> (default: <code>None</code>): Enable pin on MCU for spoolers</li> <li><code>print_current</code> (default: <code>None</code>): Current to use while printing, set to a lower current to reduce stepper heat when printing. Defaults to global_print_current, if not specified current is not changed.</li> <li><code>filament_diameter</code> (default: <code>1.75</code>): Diameter of filament being used</li> <li><code>filament_density</code> (default: <code>1.24</code>): Density of filament being used</li> <li><code>spool_inner_diameter</code> (default: <code>100</code>): Inner diameter in mm</li> <li><code>spool_outer_diameter</code> (default: <code>200</code>): Outer diameter in mm</li> <li><code>empty_spool_weight</code> (default: <code>190</code>): Empty spool weight in g</li> <li><code>spool_weight</code> (default: <code>1000</code>): Remaining spool weight in g</li> <li><code>assist_max_motor_rpm</code> (default: <code>500</code>): Max motor RPM</li> <li><code>rwd_speed_multiplier</code> (default: <code>0.5</code>): Multiplier to apply to rpm</li> <li><code>fwd_speed_multiplier</code> (default: <code>0.5</code>): Multiplier to apply to rpm</li> </ul>"},{"location":"configuration/configuration_options/#afc_boxturtle","title":"AFC_BoxTurtle","text":"<ul> <li><code>hub</code> (default: <code>None</code>): Hub name(AFC_hub) that belongs to this unit, can be overridden in AFC_stepper section</li> <li><code>extruder</code> (default: <code>None</code>): Extruder name(AFC_extruder) that belongs to this unit, can be overridden in AFC_stepper section</li> <li><code>buffer</code> (default: <code>None</code>): Buffer name(AFC_buffer) that belongs to this unit, can be overridden in AFC_stepper section</li> <li><code>led_fault</code> (default: <code>'1,0,0,0'</code>): LED color to set when faults occur in lane        (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_ready</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is ready               (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_not_ready</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane not ready              (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_loading</code> (default: <code>'1,0,0,0'</code>): LED color to set when lane is loading             (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_loading</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is loaded              (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_unloading</code> (default: <code>'1,1,.5,0'</code>): LED color to set when lane is unloading           (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_tool_loaded</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is loaded into tool    (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>long_moves_speed</code> (default: <code>100</code>): Speed in mm/s to move filament when doing long moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>long_moves_accel</code> (default: <code>400</code>): Acceleration in mm/s squared when doing long moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>short_moves_speed</code> (default: <code>25</code>): Speed in mm/s to move filament when doing short moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>short_moves_accel</code> (default: <code>400</code>): Acceleration in mm/s squared when doing short moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>short_move_dis</code> (default: <code>400</code>): Move distance in mm for failsafe moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>max_move_dis</code> (default: <code>999999</code>): Maximum distance to move filament. AFC breaks filament moves over this number into multiple moves. Useful to lower this number if running into timer too close errors when doing long filament moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>assisted_unload</code> (default: <code>False</code>): If True, the unload retract is assisted to prevent loose windings, especially on full spools. This can prevent loops from slipping off the spool. Setting value here overrides values set in AFC.cfg file</li> <li><code>n20_break_delay_time</code> (default: <code>0.200</code>): Time to wait between breaking n20 motors(nSleep/FWD/RWD all 1) and then releasing the break to allow coasting. Setting value here overrides values set in AFC.cfg file</li> <li><code>unload_on_runout</code> (default: <code>False</code>): When True AFC will unload lane and then pause when runout is triggered and spool to swap to is not set(infinite spool). Setting value here overrides values set in AFC.cfg file</li> </ul>"},{"location":"configuration/configuration_options/#afc_nightowl","title":"AFC_NightOwl","text":"<ul> <li><code>hub</code> (default: <code>None</code>): Hub name(AFC_hub) that belongs to this unit, can be overridden in AFC_stepper section</li> <li><code>extruder</code> (default: <code>None</code>): Extruder name(AFC_extruder) that belongs to this unit, can be overridden in AFC_stepper section</li> <li><code>buffer</code> (default: <code>None</code>): Buffer name(AFC_buffer) that belongs to this unit, can be overridden in AFC_stepper section</li> <li><code>led_fault</code> (default: <code>'1,0,0,0'</code>): LED color to set when faults occur in lane        (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_ready</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is ready               (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_not_ready</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane not ready              (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_loading</code> (default: <code>'1,0,0,0'</code>): LED color to set when lane is loading             (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_loading</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is loaded              (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_unloading</code> (default: <code>'1,1,.5,0'</code>): LED color to set when lane is unloading           (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>led_tool_loaded</code> (default: <code>'1,1,0,0'</code>): LED color to set when lane is loaded into tool    (R,G,B,W) 0 = off, 1 = full brightness. Setting value here overrides values set in AFC.cfg file</li> <li><code>long_moves_speed</code> (default: <code>100</code>): Speed in mm/s to move filament when doing long moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>long_moves_accel</code> (default: <code>400</code>): Acceleration in mm/s squared when doing long moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>short_moves_speed</code> (default: <code>25</code>): Speed in mm/s to move filament when doing short moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>short_moves_accel</code> (default: <code>400</code>): Acceleration in mm/s squared when doing short moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>short_move_dis</code> (default: <code>400</code>): Move distance in mm for failsafe moves. Setting value here overrides values set in AFC.cfg file</li> <li><code>assisted_unload</code> (default: <code>False</code>): If True, the unload retract is assisted to prevent loose windings, especially on full spools. This can prevent loops from slipping off the spool. Setting value here overrides values set in AFC.cfg file</li> <li><code>n20_break_delay_time</code> (default: <code>0.200</code>): Time to wait between breaking n20 motors(nSleep/FWD/RWD all 1) and then releasing the break to allow coasting. Setting value here overrides values set in AFC.cfg file</li> <li><code>unload_on_runout</code> (default: <code>False</code>): When True AFC will unload lane and then pause when runout is triggered and spool to swap to is not set(infinite spool). Setting value here overrides values set in AFC.cfg file</li> </ul>"},{"location":"installation/getting-started/","title":"AFC-Klipper-Add-On Software Installation Guide","text":"<p>This Klipper plugin is for use with modern filament control systems such as BoxTurtle, NightOwl etc.</p> <p>More information about BoxTurtle can be found here</p> <p>Note</p> <p>All examples in this section assume that you are running the command on your SBC that the <code>AFC-Klipper-Add-On</code> software is installed on.</p>"},{"location":"installation/getting-started/#installation","title":"Installation","text":""},{"location":"installation/getting-started/#step-1-prerequisites","title":"Step 1: Prerequisites","text":"<p>The <code>AFC-Klipper-Add-On</code> has the following pre-requisites:</p> <ul> <li>Klipper</li> <li>Moonraker</li> <li>WebUI (Mainsail or Fluidd)</li> <li>Python3 &gt;= 3.8</li> </ul> <p>The following software prerequisites should also be available on your system: </p> <ul> <li>jq</li> <li>crudini</li> <li>git</li> </ul> <p>With a Debian based system, you can install these prerequisites with the following command:</p> <pre><code>sudo apt-get install jq crudini git\n</code></pre>"},{"location":"installation/getting-started/#step-2-clone-the-git-repository","title":"Step 2: Clone the git repository","text":"<p>The <code>AFC-Klipper-Add-On</code> software is available on GitHub. You can clone the repository with the following command:</p> Command LineExplanation <pre><code>cd ~\ngit clone https://github.com/ArmoredTurtle/AFC-Klipper-Add-On.git\ncd AFC-Klipper-Add-On\n</code></pre> <p>Running these commands will clone the <code>AFC-Klipper-Add-On</code> repository to your home directory and change to the directory.</p>"},{"location":"installation/getting-started/#step-3-start-the-installation-process","title":"Step 3: Start the installation process","text":"<p>From within the <code>AFC-Klipper-Add-On</code> directory, you can start the installation process with the following command:</p> <pre><code>./install-afc.sh\n</code></pre> <p>Running this script will start the installation process and walk you through a guided series of prompts to help you  configure the software on your system.</p>"},{"location":"installation/getting-started/#runtime-options","title":"Runtime Options","text":"<p>If you need to configure your system for a non-standard installation, various run-time options are available. Further information on these runtime options is available here</p>"},{"location":"installation/install-menu/","title":"Installation Menu Detail","text":""},{"location":"installation/install-menu/#menu-overview","title":"Menu Overview","text":"<p>The <code>Installation</code> menu is used for the initial configuration of your system and will walk you through a guided menu in order to help you configure your system properly. As with previous menus, this menu is designed in two sections.</p> <p>The <code>top</code> section of the manual has a section labeled as <code>AFC Script Help</code>. This is a dynamic section that will provide  feedback during the process on various options that you choose. </p> <p></p> <p>Messages will appear in this section to help guide you through the process and provide visual feedback on the options you  have selected.</p>"},{"location":"installation/install-menu/#menu-options","title":"Menu Options","text":"Tip <p>As with other menus, the options available in the <code>Installation</code> menu are dynamic and will change based on the state of your system and the other options you choose.</p>"},{"location":"installation/install-menu/#t-installation-type","title":"<code>T. Installation Type</code>","text":"<p>This option will allow you to select the type of installation you wish to perform. The currently available options  available are:</p> <ul> <li>BoxTurtle (4-Lane)</li> <li>NightOwl</li> </ul>"},{"location":"installation/install-menu/#1-printercfg-configuration","title":"<code>1. Printer.cfg Configuration</code>","text":"<p>This boolean is used to automatically include the necessary <code>[include AFC/*.cfg]</code> to your printer.cfg file. This  defaults to true and is recommended to be left as such.</p>"},{"location":"installation/install-menu/#2-tip-forming","title":"<code>2. Tip-forming</code>","text":"DescriptionConfiguration <p>This boolean is used to enable or disable the tip-forming functions. This defaults to false as the recommended  setup is to use a toolhead cutter and tip-forming may be unnecessary. If tip-forming is enabled, ensure that the  options in the <code>~/printer_data/config/AFC/AFC.cfg</code> file are set correctly.</p> <p>Once set, this option can be changed via editing the <code>AFC.cfg</code> file typically located in the  <code>~/printer_data/config/AFC</code> directory.</p>"},{"location":"installation/install-menu/#3-enable-a-toolhead-cutter","title":"<code>3. Enable a toolhead cutter</code>","text":"DescriptionConfiguration <p>This boolean is used to enable or disable the toolhead cutter. This defaults to true as the recommended setup  is to use a toolhead cutter. If the toolhead cutter is enabled, ensure that the options in the  <code>~/printer_data/config/AFC/AFC.cfg</code> file are set correctly.</p> <p>Once set, this option can be changed via editing the <code>AFC.cfg</code> file typically located in the  <code>~/printer_data/config/AFC</code> directory.</p>"},{"location":"installation/install-menu/#4-enable-a-hub-cutter","title":"<code>4. Enable a hub cutter</code>","text":"DescriptionConfiguration <p>This boolean is used to enable or disable the hub cutter. Hub cutters are a remote filament cutter not  co-located with the toolhead. Examples of this include user mods such as <code>Snappy</code> and other EREC based mods. This  defaults to false as the recommended setup is to use a toolhead cutter. If the hub cutter is enabled, ensure that  the options in the <code>~/printer_data/config/AFC/AFC.cfg</code> file are set correctly.</p> <p>Once set, this option can be changed via editing the <code>AFC.cfg</code> file typically located in the  <code>~/printer_data/config/AFC</code> directory.</p>"},{"location":"installation/install-menu/#5-kick-macro","title":"<code>5. Kick Macro</code>","text":"DescriptionConfiguration <p>This boolean is used to enable or disable the kick macro. This defaults to true. If the kick macro is enabled,  ensure that the options in the <code>~/printer_data/config/AFC/AFC_macro_vars.cfg</code> file are set correctly.</p> <p>Once set, this option can be changed via editing the <code>AFC.cfg</code> file typically located in the  <code>~/printer_data/config/AFC</code> directory. Variables for this macro are located in the <code>AFC_macro_vars.cfg</code> file.</p>"},{"location":"installation/install-menu/#6-park-macro","title":"<code>6. Park Macro</code>","text":"DescriptionConfiguration <p>This boolean is used to enable or disable the park macro. This defaults to true. If the park macro is enabled,  ensure that the options in the <code>~/printer_data/config/AFC/AFC_macro_vars.cfg</code> file are set correctly.</p> <p>Once set, this option can be changed via editing the <code>AFC.cfg</code> file typically located in the  <code>~/printer_data/config/AFC</code> directory. Variables for this macro are located in the <code>AFC_macro_vars.cfg</code> file.</p>"},{"location":"installation/install-menu/#7-poop-macro","title":"<code>7. Poop Macro</code>","text":"DescriptionConfiguration <p>This boolean is used to enable or disable the poop macro. This defaults to true. If the poop macro is enabled,  ensure that the options in the <code>~/printer_data/config/AFC/AFC_macro_vars.cfg</code> file are set correctly.</p> <p>Once set, this option can be changed via editing the <code>AFC.cfg</code> file typically located in the  <code>~/printer_data/config/AFC</code> directory. Variables for this macro are located in the <code>AFC_macro_vars.cfg</code> file.</p>"},{"location":"installation/install-menu/#8-wipe-macro","title":"<code>8. Wipe Macro</code>","text":"DescriptionConfiguration <p>This boolean is used to enable or disable the wipe macro. This defaults to true. If the wipe macro is enabled,  ensure that the options in the <code>~/printer_data/config/AFC/AFC_macro_vars.cfg</code> file are set correctly.</p> <p>Once set, this option can be changed via editing the <code>AFC.cfg</code> file typically located in the  <code>~/printer_data/config/AFC</code> directory. Variables for this macro are located in the <code>AFC_macro_vars.cfg</code> file.</p>"},{"location":"installation/install-menu/#9-toolhead-sensor-or-ramming","title":"<code>9. Toolhead sensor or Ramming</code>","text":"Description <p>This boolean is used to select the usage of a toolhead filament sensor, or ramming with a filament buffer such as <code>Turtleneck</code> or <code>Turtleneck Pro</code>. </p>"},{"location":"installation/install-menu/#a-toolhead-sensor-pin","title":"<code>A. Toolhead Sensor Pin</code>","text":"Description <p>This option is used to select the pin that the toolhead sensor is connected to. This should be input in the  format of <code>mcu:pin</code> such as <code>nhk:gpio13</code> or <code>ebb:pa4</code>. Ensure that you use the proper pin for your specific  system. A pull-up <code>^</code> may be required in front of the pin if you experience intermittent issues with the sensor.</p> Note <p>This option will only appear if the <code>Toolhead sensor or Ramming</code> option is set to <code>Sensor</code>.</p>"},{"location":"installation/install-menu/#b-buffer-type","title":"<code>B. Buffer Type</code>","text":"Description <p>This option is used to select the buffer type that you are using. The currently available options are:</p> <ul> <li>Turtleneck</li> <li>TurtleneckV2 (Pro)</li> <li>None</li> </ul> Warning <p>The use of a filament is HIGHLY recommended. If you are not using a buffer, select <code>None</code>.</p>"},{"location":"installation/install-menu/#i-install-system","title":"<code>I. Install system</code>","text":"<p>Once you select <code>I. Install system with current selections</code>, depending on the options you have selected, you may be  prompted for more information.</p> <p>Examples of this would be based on your choice of a Buffer. If you have selected a buffer, you will be prompted for the <code>advance</code> and <code>trailing</code> pins. The defaults presented for these options correspond to the recommended settings  per the wiring diagrams for the BoxTurtle system. </p> Warning <p>If you are using a different system, ensure that you have the proper wiring diagrams for your system and adjust  these settings accordingly.</p> <p>If you are connected to a AFC-Lite board, ensure you use a pull-up <code>^</code> in front of the pin for the buffer.</p>"},{"location":"installation/install-menu/#m-return-to-main-menu","title":"<code>M. Return to Main Menu</code>","text":"<p>Select this option to return to the main menu.</p>"},{"location":"installation/install-menu/#q-quit","title":"<code>Q. Quit</code>","text":"<p>Select this option to exit the AFC script.</p>"},{"location":"installation/install-menu/#post-installation","title":"Post installation","text":"<p>Once you have completed the installation, you will notice some information in the <code>AFC Script Help</code> section. This  information will be based on the options you have selected, but information similar to the below will be present: <pre><code>- AFC Configuration updated with selected options at /home/pi/printer_data/config/AFC/AFC.cfg\n\n- AFC-Klipper-Add-On python extensions installed to /home/pi/klipper/klippy/extras/\n\n- Ensure you enter either your CAN bus or serial information in the /home/pi/printer_data/config/AFC/AFC_Turtle_1.cfg file\n\nYou may now quit the script or return to the main menu.\n</code></pre></p> Warning <p>Prior to restarting Klipper, ensure you check the files indicated above and modify them as necessary.</p> <p>Mandatory configuration changes are located here and must be changed / checked. You WILL experience Klipper warnings if you do not modify these settings. </p>"},{"location":"installation/main-menu/","title":"Main Menu Detail","text":""},{"location":"installation/main-menu/#menu-system","title":"Menu System","text":"<p>Each of our menus is designed to be user-friendly and easy to navigate. The menus are designed to be used with a keyboard, and each option is preceded by an alphanumeric character. Simply type the character of the option you wish to select and  you will either be prompted for input, or the option will cycle the various options.</p>"},{"location":"installation/main-menu/#menu-overview","title":"Menu Overview","text":"<p>When initially running the <code>install-afc.sh</code> script, you will be presented with the main menu. This menu will allow  you to select the action you wish to perform.</p> <p></p> <p>This menu is broken up into two main sections. The <code>top</code> section contains information about your system that was gathered during the installation process, or set by the user using a runtime options. </p> <p></p> <p>Two options here are especially important to note for most users:</p> Prior AFC-Klipper-Add-On installation detectedForce Update Required <p>This boolean value will be set to <code>true</code> if the script detects that the AFC-Klipper-Add-On software has been detected being previously installed on your system. This is checking for the existing of a symbolic link in your Klipper extras directory to the AFC-Klipper-Add-On software. </p> <p>This boolean value will show as \"True\" if a prior installation has not been detected. Otherwise, this value will typically be set to <code>false</code>. This value is used if significant changes to the software have been made that require a full re-installation  of the software. This might be required when a new major version of the software has been released. This configuration value is  stored with the Moonraker database and the value can be retrieved via the Moonraker API. </p> <p>To retrieve this value, you can use the following command: </p> <pre><code>curl -XGET localhost:7125/server/database/item?namespace=afc-install&amp;key=version\n</code></pre> <p>Warning</p> <p>This command is provided for transparency only. It is not recommended to modify this value manually.</p> <p></p> <p>The <code>bottom</code> section of the main menu is dynamic, that is, the options provided will change based on the state of your system.</p>"},{"location":"installation/main-menu/#menu-options","title":"Menu Options","text":"<p>The options available in the bottom section are as follows:</p>"},{"location":"installation/main-menu/#i-install-afc-klipper-add-on","title":"<code>I. Install AFC-Klipper-Add-On</code>","text":"<p>This option will start the installation process for the AFC-Klipper-Add-On software. This option will walk you through a  series of prompts to help you configure the software on your system.</p> <p>Note</p> <p>This option will only appear if a prior installation of the AFC-Klipper-Add-On software has not been detected.</p>"},{"location":"installation/main-menu/#a-install-additional-system","title":"<code>A. Install Additional System</code>","text":"<p>This option will help you install additional physical units into your system. An example of this would be a second BoxTurtle unit to go from a total of 4 lanes to 8 lanes. Another example would be adding a NightOwl to a system with a previous BoxTurtle or any combination thereof with supported system.</p> <p>Note</p> <p>This option is a <code>best-effort</code> option and will require knowledge of your system. You can expect to have to manually  configure the software after running this option.</p>"},{"location":"installation/main-menu/#u-update-afc-klipper-add-on","title":"<code>U. Update AFC-Klipper-Add-On</code>","text":"<p>This option will update the AFC-Klipper-Add-On software on your system. This option will clone the existing configured software  repository, and ensure that all python extensions are properly linked. Depending on the state of your system, this option may need to be run twice. </p> <p>Note</p> <p>This option will only appear if a previous installation of the AFC-Klipper-Add-On software has been detected.</p>"},{"location":"installation/main-menu/#c-utilities","title":"<code>C. Utilities</code>","text":"<p>This option will provide you with various utilities to help manage your system. For example, if you want to rename  an existing unit from <code>Turtle_1</code> (the default) to <code>Totally_Awesome_Turtle</code>, you can do so with this menu option.</p>"},{"location":"installation/main-menu/#r-remove-afc-klipper-add-on","title":"<code>R. Remove AFC-Klipper-Add-On</code>","text":"<p>This option will remove the AFC-Klipper-Add-On software from your system. A backup of the software will be created in your  <code>~/printer_data/config</code> (default) directory of your complete AFC system configuration prior to removal. The backup directory will  be named in the format of <code>AFC.backup.&lt;timestamp&gt;</code>.</p>"},{"location":"installation/main-menu/#q-quit","title":"<code>Q. Quit</code>","text":"<p>This option will exit the script.</p>"},{"location":"installation/runtime-options/","title":"AFC-Klipper-Add-On Software runtime options","text":""},{"location":"installation/runtime-options/#usage","title":"Usage","text":"<p>Usage instructions for the <code>install-afc.sh</code> script can be shown at any time by running the following command:</p> <pre><code>./install-afc.sh -h\n</code></pre> <p>An example output is shown below:</p> <pre><code>Usage: install-afc.sh [options]\n\nOptions:\n  -a &lt;moonraker address&gt;      Specify the address of the Moonraker server (default: http://localhost)\n  -k &lt;path&gt;                   Specify the path to the Klipper directory\n  -m &lt;moonraker config path&gt;  Specify the path to the Moonraker config file (default: ~/printer_data/config/moonraker.conf)\n  -n &lt;moonraker port&gt;         Specify the port of the Moonraker server (default: 7125)\n  -s &lt;klipper service name&gt;   Specify the name of the Klipper service (default: klipper)\n  -p &lt;printer config dir&gt;     Specify the path to the printer config directory (default: ~/printer_data/config)\n  -b &lt;branch&gt;                 Specify the branch to use (default: main)\n  -y &lt;klipper venv dir&gt;       Specify the klipper python venv dir (default: ~/klippy-env/bin)\n  -h                          Display this help message\n\nExample:\n ./install-afc.sh [-a &lt;moonraker address&gt;] [-k &lt;klipper_path&gt;] [-s &lt;klipper_service_name&gt;] [-m &lt;moonraker_config_path&gt;] [-n &lt;moonraker_port&gt;] [-p &lt;printer_config_dir&gt;] [-b &lt;branch&gt;] [-y &lt;klipper venv dir&gt;] [-h]\n</code></pre> <p>Each of these runtime options is explained in further detail below:</p>"},{"location":"installation/runtime-options/#runtime-command-line-options","title":"Runtime / Command-Line Options","text":""},{"location":"installation/runtime-options/#-a-moonraker-address","title":"<code>-a &lt;moonraker address&gt;</code>","text":"DescriptionMore information <p>Specify the address of the Moonraker server. The default value is <code>http://localhost</code>.</p> <p>This option allows you to specify the address of the Moonraker server. If you are running Moonraker on a different  machine, you can specify the address here. Another common use case is if your Moonraker instance requires <code>https</code>  instead of <code>http</code> to connect.</p>"},{"location":"installation/runtime-options/#-k-path","title":"<code>-k &lt;path&gt;</code>","text":"DescriptionMore information <p>Specify the path to the Klipper directory. The default value is <code>\"$HOME/klipper\"</code>.</p> <p>This option allows you to specify the path to the Klipper directory. If you have installed Klipper in a non-standard  location, you can specify the path here.</p>"},{"location":"installation/runtime-options/#-p-printer-config-dir","title":"<code>-p &lt;printer config dir&gt;</code>","text":"DescriptionMore information <p>Specify the path to the printer config directory. The default value is <code>\"$HOME/printer_data/config\"</code>.</p> <p>This option allows you to specify the path to the printer config directory. If you have your printer configuration files  in a non-standard location, you can specify the path here. This is a common option for less common installations such as  when you are running multiple printers on a single system or have a non-standard configuration / Klipper installation for some printers such as Qidi.</p>"},{"location":"installation/runtime-options/#-m-moonraker-config-path","title":"<code>-m &lt;moonraker config path&gt;</code>","text":"DescriptionMore information <p>Specify the path to the Moonraker config file. The default value is <code>\"$printer_config_dir/moonraker.conf\"</code>.</p> <p>This option allows you to specify the path to the Moonraker config file. If you have your Moonraker configuration file  in a non-standard location, you can specify the path here.</p>"},{"location":"installation/runtime-options/#-n-moonraker-port","title":"<code>-n &lt;moonraker port&gt;</code>","text":"DescriptionMore information <p>Specify the port of the Moonraker server. The default value is <code>7125</code>.</p> <p>This option allows you to specify the port of the Moonraker server. If you have configured Moonraker to run on a  non-standard port, you can specify the port here.</p>"},{"location":"installation/runtime-options/#-s-klipper-service-name","title":"<code>-s &lt;klipper service name&gt;</code>","text":"DescriptionMore information <p>Specify the name of the Klipper service. The default value is <code>klipper</code>.</p> <p>This option allows you to specify the name of the Klipper service. If you have configured Klipper to run as a  different service name, you can specify the service name here. If you have multiple klipper instances running on a  single system, you may have configured them to run as different services. This option allows you to specify the service name for the Klipper instance you want to use with AFC. Common installation tools such as Kiauh allow you to configure multiple Klipper instances on a single system and will oftentimes use service names such as <code>klipper-1</code> or <code>klipper-2</code> if multiple instances are running. </p> <p>Note</p> <p>If you are unsure of the service name, you can check the service name by running the following command: <pre><code>systemctl list-units --type=service | grep klipper\n</code></pre> This service name is also used for alternative firmware such as Kalico or Danger Klipper (deprecated), unless you have configured them to run as a different service name.</p>"},{"location":"installation/runtime-options/#-b-branch","title":"<code>-b &lt;branch&gt;</code>","text":"DescriptionMore information <p>Specify the branch to use. The default value is <code>main</code>.</p> <p>This option allows you to specify the branch to use when using the <code>install-afc.sh</code> installation script. If you want to use a  specific branch, you can specify the branch name here. This is useful if you want to test new features or bug fixes before  they are merged into the main branch and is commonly used for development work or testing. Normal users should not need to specify this option.</p>"},{"location":"installation/runtime-options/#-y-klipper-venv-dir","title":"<code>-y &lt;klipper venv dir&gt;</code>","text":"DescriptionMore information <p>Specify the klipper python venv dir. The default value is <code>\"$HOME/klippy-env/bin\"</code>.</p> <p>This option allows you to specify the path to the Klipper python virtual environment directory. If you have installed Klipper in a python virtual environment and have installed it in a non-standard location, you can specify the path here. On the large majority of use-cases, this setting should not need to be changed, but the option is provided for users who have installed  the virtual environment in a non-standard location.</p>"},{"location":"installation/runtime-options/#-h-help","title":"<code>-h | Help</code>","text":"DescriptionMore information <p>Display the help message.</p> <p>This option displays the help message for the <code>install-afc.sh</code> script. This message provides a summary of the available  runtime options and how to use them. If you are unsure of how to use the script or need a reminder of the available options,  you can use this option to display the help message.</p>"},{"location":"installation/runtime-options/#examples","title":"Examples","text":""},{"location":"installation/runtime-options/#example-1-specifying-the-moonraker-address","title":"Example 1: Specifying the Moonraker address","text":"<pre><code>./install-afc.sh -a https://192.168.1.120\n</code></pre> <p>This would use a Moonraker connection running at https://192.168.1.120</p>"},{"location":"installation/runtime-options/#example-2-specifying-multiple-options","title":"Example 2: Specifying multiple options","text":"<pre><code>./install-afc.sh -a https://192.168.1.120 -p 7126 -k /home/pi/klipper\n</code></pre> <p>You can specify multiple options, however, you cannot use the same option more than a single time.</p>"},{"location":"klipper/command_reference/","title":"AFC Klipper Add-On Command Reference","text":""},{"location":"klipper/command_reference/#built-in-afc-functions","title":"Built-in AFC Functions","text":"<p>The following commands are built-in the AFC-Klipper-Add-On and are available through  the Klipper console.</p> <p>NOTE: LANE/HUB/BUFFER etc. names are case sensitive and should exactly match the names defined in config files</p>"},{"location":"klipper/command_reference/#afc_calibration","title":"AFC_CALIBRATION","text":"<p>Description: Open a prompt to start AFC calibration by selecting a unit to calibrate. Creates buttons for each unit and allows the option to calibrate all lanes across all units.  </p> <p>Usage: <code>AFC_CALIBRATION</code> Example: <code>AFC_CALIBRATION</code> </p>"},{"location":"klipper/command_reference/#afc_lane_reset","title":"AFC_LANE_RESET","text":"<p>Description: This function resets a specified lane to the hub position in the AFC system. It checks for various error conditions, such as whether the toolhead is loaded or whether the hub is already clear. The function moves the lane back to the hub based on the specified or default distances, ensuring the lane's correct state before completing the reset.  </p> <p>Usage: <code>AFC_LANE_RESET LANE=&lt;lane&gt; DISTANCE=&lt;distance&gt;</code> Example: <code>AFC_LANE_RESET LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#afc_reset","title":"AFC_RESET","text":"<p>Description: This function opens a prompt allowing the user to select a loaded lane for reset. It displays a list of loaded lanes and provides a reset button for each lane. If no lanes are loaded, an informative message is displayed indicating that a lane must be loaded to proceed with resetting.  </p> <p>Usage: <code>AFC_RESET DISTANCE=&lt;distance&gt;</code> Example: <code>AFC_RESET LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#afc_resume","title":"AFC_RESUME","text":"<p>Description: This function clears the error state of the AFC system, sets the in_toolchange flag to False, runs the resume script, and restores the toolhead position to the last saved position.  </p> <p>Usage: <code>AFC_RESUME</code> Example: <code>AFC_RESUME</code> </p>"},{"location":"klipper/command_reference/#afc_status","title":"AFC_STATUS","text":"<p>Description: This function generates a status message for each unit and lane, indicating the preparation, loading, hub, and tool states. The status message is formatted with HTML tags for display.  </p> <p>Usage: <code>AFC_STATUS</code> Example: <code>AFC_STATUS</code> </p>"},{"location":"klipper/command_reference/#all_calibration","title":"ALL_CALIBRATION","text":"<p>Description: Open a prompt to confirm calibration of all lanes in all units. Provides 'Yes' to confirm and 'Back' to return to the previous menu.  </p> <p>Usage: <code>ALL_CALIBRATION</code> Example: <code>ALL_CALIBRATION</code> </p>"},{"location":"klipper/command_reference/#calibrate_afc","title":"CALIBRATE_AFC","text":"<p>Description: This function performs the calibration of the hub and Bowden length for one or more lanes within an AFC (Automated Filament Control) system. The function uses precise movements to adjust the positions of the steppers, check the state of the hubs and tools, and calculate distances for calibration based on the user-provided input. If no specific lane is provided, the function defaults to notifying the user that no lane has been selected. The function also includes the option to calibrate the Bowden length for a particular lane, if specified.  </p> <p>Usage: <code>CALIBRATE_AFC LANE=&lt;lane&gt; DISTANCE=&lt;distance&gt; TOLERANCE=&lt;tolerance&gt; BOWDEN=&lt;lane&gt;</code> Example: <code>CALIBRATE_AFC LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#change_tool","title":"CHANGE_TOOL","text":"<p>Description: This function handles the tool change process. It retrieves the lane specified by the 'LANE' parameter, checks the filament sensor, saves the current position, and performs the tool change by unloading the current lane and loading the new lane. Optionally setting PURGE_LENGTH parameter to pass a value into poop macro.  </p> <p>Usage: <code>CHANGE_TOOL LANE=&lt;lane&gt; PURGE_LENGTH=&lt;purge_length&gt;(optional value)</code> Example: <code>CHANGE_TOOL LANE=lane1 PURGE_LENGTH=100</code> </p>"},{"location":"klipper/command_reference/#get_tip_forming","title":"GET_TIP_FORMING","text":"<p>Description: Shows the tip forming configuration  </p> <p>Usage: <code>GET_TIP_FORMING</code> Example: <code>GET_TIP_FORMING</code> </p>"},{"location":"klipper/command_reference/#hub_cut_test","title":"HUB_CUT_TEST","text":"<p>Description: This function tests the cutting sequence of the hub cutter for a specified lane. It retrieves the lane specified by the 'LANE' parameter, performs the hub cut, and responds with the status of the operation.  </p> <p>Usage: <code>HUB_CUT_TEST LANE=&lt;lane&gt;</code> Example: <code>HUB_CUT_TEST LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#hub_load","title":"HUB_LOAD","text":"<p>Description: This function handles the loading of a specified lane into the hub. It performs several checks and movements to ensure the lane is properly loaded.  </p> <p>Usage: <code>HUB_LOAD LANE=&lt;lane&gt;</code> Example: <code>HUB_LOAD LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#lane_move","title":"LANE_MOVE","text":"<p>Description: This function handles the manual movement of a specified lane. It retrieves the lane specified by the 'LANE' parameter and moves it by the distance specified by the 'DISTANCE' parameter. Distance's lower than 200 moves extruder at short_move_speed/accel, values above 200 move extruder at long_move_speed/accel  </p> <p>Usage: <code>LANE_MOVE LANE=&lt;lane&gt; DISTANCE=&lt;distance&gt;</code> Example: <code>LANE_MOVE LANE=lane1 DISTANCE=100</code> </p>"},{"location":"klipper/command_reference/#lane_unload","title":"LANE_UNLOAD","text":"<p>Description: This function handles the unloading of a specified lane from the extruder. It performs several checks and movements to ensure the lane is properly unloaded.  </p> <p>Usage: <code>LANE_UNLOAD LANE=&lt;lane&gt;</code> Example: <code>LANE_UNLOAD LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#query_buffer","title":"QUERY_BUFFER","text":"<p>Description: Reports the current state of the buffer sensor and, if applicable, the rotation distance of the current AFC stepper motor.  </p> <p>Usage: <code>QUERY_BUFFER BUFFER=&lt;buffer_name&gt;</code> Example: <code>QUERY_BUFFER BUFFER=TN</code> </p>"},{"location":"klipper/command_reference/#reset_afc_mapping","title":"RESET_AFC_MAPPING","text":"<p>Description: This commands resets all tool lane mapping to the order that is setup in configuration. Useful to put in your PRINT_END macro to reset mapping  </p> <p>Usage: <code>RESET_AFC_MAPPING</code> Example: <code>RESET_AFC_MAPPING</code> </p>"},{"location":"klipper/command_reference/#reset_failure","title":"RESET_FAILURE","text":"<p>Description: This function clears the error state of the AFC system by setting the error state to False.  </p> <p>Usage: <code>RESET_FAILURE</code> Example: <code>RESET_FAILURE</code> </p>"},{"location":"klipper/command_reference/#save_extruder_values","title":"SAVE_EXTRUDER_VALUES","text":"<p>Description: Macro call to write tool_stn, tool_stn_unload and tool_sensor_after_extruder variables to config file for specified extruder.  </p> <p>Usage: <code>SAVE_EXTRUDER_VALUES EXTRUDER=&lt;extruder&gt;</code> Example: <code>SAVE_EXTRUDER_VALUES EXTRUDER=extruder</code> </p>"},{"location":"klipper/command_reference/#save_hub_dist","title":"SAVE_HUB_DIST","text":"<p>Description: Macro call to write dist_hub variable to config file for specified lane.  </p> <p>Usage: <code>SAVE_HUB_DIST LANE=&lt;lane_name&gt;</code> Example: <code>SAVE_HUB_DIST LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#save_speed_multiplier","title":"SAVE_SPEED_MULTIPLIER","text":"<p>Description: Macro call to write fwd_speed_multiplier and rwd_speed_multiplier variables to config file for specified lane.  </p> <p>Usage: <code>SAVE_SPEED_MULTIPLIER LANE=&lt;lane_name&gt;</code> Example: <code>SAVE_SPEED_MULTIPLIER LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#set_afc_toolchanges","title":"SET_AFC_TOOLCHANGES","text":"<p>Description: This macro can be used to set total number of toolchanges from slicer. AFC will keep track of tool changes and print out current tool change number when a T(n) command is called from gcode. The following call can be added to the slicer by adding the following lines to Change filament G-code section in your slicer. You may already have <code>T[next_extruder]</code>, just make sure the toolchange call is after your T(n) call <pre><code>T[next_extruder]\n{ if toolchange_count == 1 }SET_AFC_TOOLCHANGES TOOLCHANGES=[total_toolchanges]{endif }\n</code></pre> The following can also be added to your <code>PRINT_END</code> section in your slicer to set number of toolchanges back to zero <code>SET_AFC_TOOLCHANGES TOOLCHANGES=0</code> </p> <p>Usage: <code>SET_AFC_TOOLCHANGES TOOLCHANGES=&lt;number&gt;</code> Example: <code>SET_AFC_TOOLCHANGES TOOLCHANGES=100</code> </p>"},{"location":"klipper/command_reference/#set_bowden_length","title":"SET_BOWDEN_LENGTH","text":"<p>Description: This function adjusts the length of the Bowden tube between the hub and the toolhead. It retrieves the hub specified by the 'HUB' parameter and the length adjustment specified by the 'LENGTH' parameter. UNLOAD_LENGTH adjusts unload Bowden length. If the hub is not specified and a lane is currently loaded, it uses the hub of the current lane. To reset length back to config value, pass in <code>reset</code> for each length to reset to value in config file. Adding +/- in front of the length will increase/decrease bowden length by that amount.  </p> <p>Usage: <code>SET_BOWDEN_LENGTH HUB=&lt;hub&gt; LENGTH=&lt;length&gt; UNLOAD_LENGTH=&lt;length&gt;</code> Example: <code>SET_BOWDEN_LENGTH HUB=Turtle_1 LENGTH=+100 UNLOAD_LENGTH=-100</code> </p>"},{"location":"klipper/command_reference/#set_buffer_multiplier","title":"SET_BUFFER_MULTIPLIER","text":"<p>Description: This function handles the adjustment of the buffer multipliers for the turtleneck buffer. It retrieves the multiplier type ('HIGH' or 'LOW') and the factor to be applied. The function ensures that the factor is valid and updates the corresponding multiplier.  </p> <p>Usage: <code>SET_BUFFER_MULTIPLIER BUFFER=&lt;buffer_name&gt; MULTIPLIER=&lt;HIGH/LOW&gt; FACTOR=&lt;factor&gt;</code> Example: <code>SET_BUFFER_MULTIPLIER BUFFER=TN MULTIPLIER=HIGH FACTOR=1.2</code> </p>"},{"location":"klipper/command_reference/#set_buffer_velocity","title":"SET_BUFFER_VELOCITY","text":"<p>Description: Allows users to tweak buffer velocity setting while printing. This setting is not saved in configuration. Please update your configuration file once you find a velocity that works for your setup.  </p> <p>Usage: <code>SET_BUFFER_VELOCITY BUFFER=&lt;buffer_name&gt; VELOCITY=&lt;value&gt;</code> Example: <code>SET_BUFFER_VELOCITY BUFFER=TN2 VELOCITY=100</code> </p>"},{"location":"klipper/command_reference/#set_color","title":"SET_COLOR","text":"<p>Description: This function handles changing the color of a specified lane. It retrieves the lane specified by the 'LANE' parameter and sets its color to the value provided by the 'COLOR' parameter.  </p> <p>Usage: <code>SET_COLOR LANE=&lt;lane&gt; COLOR=&lt;color&gt;</code> Example: <code>SET_COLOR LANE=lane1 COLOR=FF0000</code> </p>"},{"location":"klipper/command_reference/#set_hub_dist","title":"SET_HUB_DIST","text":"<p>Description: This function adjusts the distance between a lanes extruder and hub. Adding +/- in front of the length will increase/decrease length by that amount. To reset length back to config value, pass in <code>reset</code> for length to reset to value in config file.  </p> <p>Usage: <code>SET_HUB_DIST LANE=&lt;lane_name&gt; LENGTH=+/-&lt;fwd_multiplier&gt;</code> Example: <code>SET_HUB_DIST LANE=lane1 LENGTH=+100</code> </p>"},{"location":"klipper/command_reference/#set_lane_loaded","title":"SET_LANE_LOADED","text":"<p>Description: This macro handles manually setting a lane loaded into the toolhead. This is useful when manually loading lanes during prints after AFC detects an error when loading/unloading and pauses. If there is a lane already loaded this macro will also desync that lane extruder from the toolhead extruder and set its values and led appropriately. Retrieves the lane specified by the 'LANE' parameter and set the appropriate values in AFC to continue using the lane.  </p> <p>Usage: <code>SET_LANE_LOADED LANE=&lt;lane&gt;</code> Example: <code>SET_LANE_LOADED LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#set_map","title":"SET_MAP","text":"<p>Description: This function handles changing the GCODE tool change command for a Lane.  </p> <p>Usage: <code>SET_MAP LANE=&lt;lane&gt; MAP=&lt;cmd&gt;</code> Example: <code>SET_MAP LANE=lane1 MAP=T1</code> </p>"},{"location":"klipper/command_reference/#set_material","title":"SET_MATERIAL","text":"<p>Description: This function handles changing the material of a specified lane. It retrieves the lane specified by the 'LANE' parameter and sets its material to the value provided by the 'MATERIAL' parameter.  </p> <p>Usage: <code>SET_MATERIAL LANE=&lt;lane&gt; MATERIAL=&lt;material&gt;</code> Example: <code>SET_MATERIAL LANE=lane1 MATERIAL=ABS</code> </p>"},{"location":"klipper/command_reference/#set_rotation_factor","title":"SET_ROTATION_FACTOR","text":"<p>Description: Adjusts the rotation distance of the current AFC stepper motor by applying a specified factor. If no factor is provided, it defaults to 1.0, which resets the rotation distance to the base value.  </p> <p>Usage: <code>SET_ROTATION_FACTOR BUFFER=&lt;buffer_name&gt; FACTOR=&lt;factor&gt;</code> Example: <code>SET_ROTATION_FACTOR BUFFER=TN FACTOR=1.2</code> </p>"},{"location":"klipper/command_reference/#set_runout","title":"SET_RUNOUT","text":"<p>Description: This function handles setting the runout lane (infinite spool) for a specified lane. It retrieves the lane specified by the 'LANE' parameter and updates its the lane to use if filament runs out by untriggering prep sensor  </p> <p>Usage: <code>SET_RUNOUT LANE=&lt;lane&gt; RUNOUT=&lt;lane&gt;</code> Example: <code>SET_RUNOUT LANE=lane1 RUNOUT=lane4</code> </p>"},{"location":"klipper/command_reference/#set_speed_multiplier","title":"SET_SPEED_MULTIPLIER","text":"<p>Description: Macro call to update fwd_speed_multiplier or rwd_speed_multiplier values without having to set in config and restart klipper. This macro allows adjusting these values while printing. Multiplier values must be between 0.0 - 1.0  </p> <p>Use FWD variable to set forward multiplier, use RWD to set reverse multiplier  </p> <p>After running this command run SAVE_SPEED_MULTIPLIER LANE= to save value to config file   <p>Usage: <code>SET_SPEED_MULTIPLIER LANE=&lt;lane_name&gt; FWD=&lt;fwd_multiplier&gt; RWD=&lt;rwd_multiplier&gt;</code> Example: <code>SET_SPEED_MULTIPLIER LANE=lane1 RWD=0.9</code> </p>"},{"location":"klipper/command_reference/#set_spool_id","title":"SET_SPOOL_ID","text":"<p>Description: This function handles setting the spool ID for a specified lane. It retrieves the lane specified by the 'LANE' parameter and updates its spool ID, material, color, and weight based on the information retrieved from the Spoolman API.  </p> <p>Usage: <code>SET_SPOOL_ID LANE=&lt;lane&gt; SPOOL_ID=&lt;spool_id&gt;</code> Example: <code>SET_SPOOL_ID LANE=lane1 SPOOL_ID=12345</code> </p>"},{"location":"klipper/command_reference/#set_tip_forming","title":"SET_TIP_FORMING","text":"<p>Description: Sets the tip forming configuration Unspecified ones are left unchanged. True boolean values (use_skinnydip) are specified as \"true\" (case insensitive); every other values is considered as \"false\". Note: this will not update the configuration file. To make settings permanent, update the configuration file manually.  </p> <p>Usage: <code>SET_TIP_FORMING PARAMETER=VALUE ...</code> Example: <code>SET_TIP_FORMING ramming_volume=20 toolchange_temp=220</code> </p>"},{"location":"klipper/command_reference/#set_weight","title":"SET_WEIGHT","text":"<p>Description: This function handles changing the material of a specified lane. It retrieves the lane specified by the 'LANE' parameter and sets its material to the value provided by the 'MATERIAL' parameter.  </p> <p>Usage: <code>SET_WEIGHT LANE=&lt;lane&gt; WEIGHT=&lt;weight&gt;</code> Example: <code>SET_WEIGHT LANE=lane1 WEIGHT=850</code> </p>"},{"location":"klipper/command_reference/#test","title":"TEST","text":"<p>Description: This function tests the assist motors of a specified lane at various speeds. It performs the following steps: 1. Retrieves the lane specified by the 'LANE' parameter. 2. Tests the assist motor at full speed, 50%, 30%, and 10% speeds. 3. Reports the status of each test step.  </p> <p>Usage: <code>TEST LANE=&lt;lane&gt;</code> Example: <code>TEST LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#test_afc_tip_forming","title":"TEST_AFC_TIP_FORMING","text":"<p>Description: Gives ability to test AFC tip forming without doing a tool change  </p> <p>Usage: <code>TEST_AFC_TIP_FORMING</code> Example: <code>TEST_AFC_TIP_FORMING</code> </p>"},{"location":"klipper/command_reference/#tool_load","title":"TOOL_LOAD","text":"<p>Description: This function handles the loading of a specified lane into the tool. It retrieves the lane specified by the 'LANE' parameter and calls the TOOL_LOAD method to perform the loading process. Optionally setting PURGE_LENGTH parameter to pass a value into poop macro.  </p> <p>Usage: <code>TOOL_LOAD LANE=&lt;lane&gt; PURGE_LENGTH=&lt;purge_length&gt;(optional value)</code> Example: <code>TOOL_LOAD LANE=lane1 PURGE_LENGTH=80</code> </p>"},{"location":"klipper/command_reference/#tool_unload","title":"TOOL_UNLOAD","text":"<p>Description: This function handles the unloading of a specified lane from the tool head. It retrieves the lane specified by the 'LANE' parameter or uses the currently loaded lane if no parameter is provided, and calls the TOOL_UNLOAD method to perform the unloading process.  </p> <p>Usage: <code>TOOL_UNLOAD LANE=&lt;lane&gt;</code> Example: <code>TOOL_UNLOAD LANE=lane1</code> </p>"},{"location":"klipper/command_reference/#turn_off_afc_led","title":"TURN_OFF_AFC_LED","text":"<p>Description: This macro handles turning off all LEDs for AFC_led configurations. Color for LEDs are saved if colors are changed while they are turned off.  </p> <p>Usage: <code>TURN_OFF_AFC_LED</code> Example: <code>TURN_OFF_AFC_LED</code> </p>"},{"location":"klipper/command_reference/#turn_on_afc_led","title":"TURN_ON_AFC_LED","text":"<p>Description: This macro handles turning on all LEDs for AFC_led configurations. LEDs are restored to last previous state.  </p> <p>Usage: <code>TURN_ON_AFC_LED</code> Example: <code>TURN_ON_AFC_LED</code> </p>"},{"location":"klipper/command_reference/#unit_bow_calibration","title":"UNIT_BOW_CALIBRATION","text":"<p>Description: Open a prompt to calibrate the Bowden length for a specific lane in the selected unit. Provides buttons for each lane, with a note to only calibrate one lane per unit.  </p> <p>Usage: <code>UNIT_CALIBRATION UNIT=&lt;unit&gt;</code> Example: <code>UNIT_CALIBRATION UNIT=Turtle_1</code> </p>"},{"location":"klipper/command_reference/#unit_calibration","title":"UNIT_CALIBRATION","text":"<p>Description: Open a prompt to calibrate either the distance between the extruder and the hub or the Bowden length for the selected unit. Provides buttons for lane calibration, Bowden length calibration, and a back option.  </p> <p>Usage: <code>UNIT_CALIBRATION UNIT=&lt;unit&gt;</code> Example: <code>UNIT_CALIBRATION UNIT=Turtle_1</code> </p>"},{"location":"klipper/command_reference/#unit_lane_calibration","title":"UNIT_LANE_CALIBRATION","text":"<p>Description: Open a prompt to calibrate the extruder-to-hub distance for each lane in the selected unit. Creates buttons for each lane, grouped in sets of two, and allows calibration for all lanes or individual lanes.  </p> <p>Usage: <code>UNIT_LANE_CALIBRATION UNIT=&lt;unit&gt;</code> Example: <code>UNIT_LANE_CALIBRATION UNIT=Turtle_1</code> </p>"},{"location":"klipper/command_reference/#unset_lane_loaded","title":"UNSET_LANE_LOADED","text":"<p>Description: Unsets current lane from AFC loaded status. Mainly this would be used if AFC thinks that there is a lane loaded into the toolhead but nothing is actually loaded. Retrieves the lane specified by the 'LANE' parameter and set the appropriate values in AFC to continue using the lane.  </p> <p>Usage: <code>UNSET_LANE_LOADED</code> Example: <code>UNSET_LANE_LOADED</code> </p>"},{"location":"klipper/command_reference/#update_toolhead_sensors","title":"UPDATE_TOOLHEAD_SENSORS","text":"<p>Description: Macro call to adjust <code>tool_stn</code>`tool_stn_unload<code>\\</code>tool_sensor_after_extruder` lengths for specified extruder without having to update config file and restart klipper.  </p> <p><code>tool_stn length</code> is the length from the sensor before extruder gears (tool_start) to nozzle. If sensor after extruder gears(tool_end) is set then the value if from tool_end sensor.  </p> <p><code>tool_stn_unload</code> length is the length to unload so that filament is not in extruder gears anymore.  </p> <p><code>tool_sensor_after_extruder</code> length is mainly used for those that have a filament sensor after extruder gears, target this length to retract filament enough so that it's not in the extruder gears anymore.  </p> <p>Please pause print if you need to adjust this value while printing  </p> <p>Usage: <code>UPDATE_TOOLHEAD_SENSORS EXTRUDER=&lt;extruder&gt; TOOL_STN=&lt;length&gt; TOOL_STN_UNLOAD=&lt;length&gt; TOOL_AFTER_EXTRUDER=&lt;length&gt;</code> Example: <code>UPDATE_TOOLHEAD_SENSORS EXTRUDER=extruder TOOL_STN=100</code> </p>"},{"location":"klipper/command_reference/#afc-macros","title":"AFC Macros","text":"<p>The following macros are defined in the <code>config/macros/AFC_macros.cfg</code> file. These macros can be executed either from the console, called from another macro, or triggered through  the Mainsail or Fluidd web interfaces.</p>"},{"location":"klipper/command_reference/#bt_tool_unload","title":"BT_TOOL_UNLOAD","text":"<p>Description: Unloads the currently loaded lane</p>"},{"location":"klipper/command_reference/#bt_change_tool","title":"BT_CHANGE_TOOL","text":"<p>Description: Switch to a new lane by ejecting the previously loaded one and then load the lane specified by LANE parameter. Lane parameter is an integer and defaults to 1. ex. <code>BT_CHANGE_TOOL LANE=2</code></p>"},{"location":"klipper/command_reference/#bt_lane_eject","title":"BT_LANE_EJECT","text":"<p>Description: Fully eject the filament from the lane so spool can be removed. Lane parameter is an integer and defaults to 1. ex. <code>BT_LANE_EJECT LANE=2</code></p>"},{"location":"klipper/command_reference/#bt_lane_move","title":"BT_LANE_MOVE","text":"<p>Description: Move the specified lane the specified amount. Lane parameter is an integer and defaults to 1. Distance parameter is and integer and defaults to 20. Distance over 200 uses long load speeds. ex <code>BT_LANE_MOVE LANE=2 DISTANCE=100</code></p>"},{"location":"klipper/command_reference/#bt_resume","title":"BT_RESUME","text":"<p>Description: Resume the print after an error, using normal resume will also call AFC_RESUME</p>"},{"location":"klipper/command_reference/#bt_prep","title":"BT_PREP","text":"<p>Description: Run the AFC PREP sequence</p>"}]}